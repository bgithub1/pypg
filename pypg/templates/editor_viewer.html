<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Editor</title>
  <style type="text/css" media="screen">
    .ace_editor, .toolbar {
        border: 1px solid lightgray;
        margin: auto;
        width: 80%;
    } 
    .ace_editor {
        height: 600px;
        width:  1200px;
    }
    </style>
</head>

<body>

	<h3><input type="button" value="send back" onclick="sendBack()"></h3>
	<div></div>
	<div id="editor">{{ html_to_display_1 | safe }}</div>

<!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.3.3/ace.js"></script>-->    
<script type="text/javascript" src="{{ url_for('static', filename='ace.js') }}"></script>

<script>
	//var textarea = $('#content');
	var editor = ace.edit("editor");
	editor.getSession().setMode("ace/mode/duval");
	//textarea.val(editor.getSession().getValue());
</script>

<script>
	function post_it(path, params, method) {
	    method = method || "post"; // Set method to post by default if not specified.
	
	    // The rest of this code assumes you are not using a library.
	    // It can be made less wordy if you use one.
	    var form = document.createElement("form");
	    form.setAttribute("method", method);
	    form.setAttribute("action", path);
	
	    for(var key in params) {
	        if(params.hasOwnProperty(key)) {
	            var hiddenField = document.createElement("input");
	            hiddenField.setAttribute("type", "hidden");
	            hiddenField.setAttribute("name", key);
	            hiddenField.setAttribute("value", params[key]);
	
	            form.appendChild(hiddenField);
	        }
	    }
	
	    document.body.appendChild(form);
	    form.submit();
	}
</script>
<script type="text/javascript">
	function sendBack(){
		alert('sending back to server')
		post_it('/editor_capture_text',{'name':'full_text','value':editor.getSession().getValue()},'post')
	}
</script>
</body>
</html>
